![IDFM](https://upload.wikimedia.org/wikipedia/fr/c/ce/IdFMobilit%C3%A9s.svg)

# Introduction

Ce document, rassemble la documentation des données présentent sur le datalake IDFM sur Azure.

# Sommaire

- [Informations utiles sur le Datalake Azure](#informations-utiles-sur-le-datalake-azure)

- [Catalogue de données par domaine](#catalogue-de-données-par-domaine)
    - [Offre de transport](#offre-de-transport)
        - [Offre théorique](#offre-théorique)
        - [Informations voyageurs temps réel (IVTR)](#informations-voyageurs-temps-réel-ivtr)
        - [Offre réalisée](#offre-réalisée)
        - [Info-trafic](#info-trafic)
    - [Usager](#usager)
        - [Recherche d'itinéraires](#recherche-ditinéraires)
        - [Assistance téléphonique](#assistance-téléphonique)
    - [Référentiels](#référentiels)
      - [Arrêt](#arrêt)

# Informations utiles sur le Datalake Azure

## Format parquet

Sauf impossibilité, préférer le format parquet pour toutes les données stockées sur le datalake.

Ce format a les avantages suivants :

- Il est orienté colonnes
- Il conserve le type des colonnes
- Il est compressé (un fichier parquet prend entre 10 et 40 fois moins lourd)
- Il est partitionnable
  Le seul "défaut" est qu'il ne s'ouvre pas avec Excel. Pour cela, il existe un logiciel TAD.

## Heure UTC

Pour harmoniser les données, et éviter les problèmes avec les changements d'heure, nous recommandons d'utiliser les
heures en UTC.

## Organisation des données

Les données sur le datalake sont organisés selon la convention suivante :

domain/source/data

Exemple : offre-de-transport/prim/offre-theorique
Les noms sont en français, en minuscule, avec des "-" pour séparer les mots,

Dans le détail :

- Domaine : le domaine métier
- Source : la source de la donnée
- Data : le nom de la donnée

Puis classées selon bronze, silver, gold

- bronze : la donnée brute telle qu'elle est copiée.
- silver : des modifications types : typages des données, transformation en parquet, selection de certaines données
  pertinentes.
- gold : des données modifiées à forte valeur métier.
- error : Les fichiers bronze qui n'ont pas pu être traités.
  Nous recommandons d'utiliser a minima le niveau silver sauf dans le cas d'exploration éventuellement.

#

# Catalogue de données par domaine

## Offre de transport

### Offre théorique

Type de données : **Heures de passages théoriques des transports en commun d'IDF**
Source : IDFM/PRIM
Fréquence de mise à jour : 1 fois par jour
Confidentialité : Publique
Responsable local :
Détails : Les données contiennent les **horaires de passages théoriques de tous les arrêts des lignes de transport en commun de
l'ensemble du réseau en Île-de-France**. Documentation sur le format GTFS (en anglais) : https://gtfs.org/schedule/reference/
Points d'attention : RAS
Accès sécurisé Azure Datalake Storage : [offre-de-transport/prim/offre-theorique](https://dppdatalakeprddls01.dfs.core.windows.net/offre-de-transport/prim/offre-theorique/)


### Contenu du Gold

En gold, il y a un fichier `consolidated_offre_theorique.parquet` :

- L'offre théorique à partir du 01/09/2021 au format tabulaire
- Avec les colonnes :

| Nom de colonne       | Type                | Description                                                  |
|----------------------|---------------------|--------------------------------------------------------------|
| **route_id**         | object              | ID de la ligne de transport                                  |
| **agency_id**        | object              | ID de l'opérateur                                            |
| **trip_id**          | int64               | ID de l'itinéraire (issu du référentiel de trip_id           |
| **trip_headsign**    | object              | Entête de l'itinéraire (ex: Bondy, QIWI, etc.)               |
| **direction_id**     | int8                | ID de la direction (0=aller, 1=retour)                       |
| **stop_id**          | object              | ID ICAR de l'arrêt                                           |
| **departure_time**   | datetime64[ns, UTC] | date et heure de départ                                      |
| **arrival_time**     | datetime64[ns, UTC] | date et heure d'arrivée                                      |
| **stop_sequence**    | int16               | numéro de l'arrêt (rang)                                     |
| **route_long_name**  | object              | nom complet de la ligne de transport                         |
| **route_short_name** | object              | abréviation du nom de la ligne de transport                  |
| **parent_station**   | float64             | ID ICAR de la station parent                                 |
| **route_type**       | int8                | ID du type de ligne de transport (bus, rail, tram, metro...) |
| **stop_name**        | object              | nom de l'arrêt                                               |
| **stop_lat**         | float64             | latitude (GPS) de l'arrêt                                    |
| **stop_lon**         | float64             | longitude (GPS) de l'arrêt                                   |
| **zone_stop_id**     | object              | ID unique de la zone d'arrêt issu du référentiel ICAR        |

Les données sont au format parquet, compressé avec `brotli`, partitionnées selon le jour.

Voici un exemple de code python pour lire les données du 23/02/2024 au 24/02/2024 :

```python
# Si vous êtes en local / sur une Azure function
CONTAINER_URL = 'abfs://offre-de-transport@dppdatalakeprddls01.blob.core.windows.net'
# Si vous êtes sur Azure Synapse
CONTAINER_URL = 'abfss://offre-de-transport@dppdatalakeprddls01.dfs.core.windows.net'
import pandas as pd

path = f'{CONTAINER_URL}/prim/offre-theorique/gold/consolidated_offre_theorique.parquet'
pd.read_parquet(path,
                storage_options={"anon": False},
                filters=[("date", ">=", "2024-02-23"),
                         ("date", "<=", "2024-02-24")])
```

### Contenu du Silver

Données jour par jour des fichiers du dernier gtfs produit pour la journée, au **format parquet**.

### Contenu du Bronze

Données jour par jour de l'ensemble des gtfs produits au **format txt**.

### Contenu du Landing

Zone intermédiaire qui contient temporairement les gtfs au **format zip**, avant de les dézipper.

#

### Informations voyageurs temps réel (IVTR)

Type de données : **Horaires de passages réelles des transports en IDF**
Source : IDFM/PRIM
Fréquence de mise à jour : Toutes les 5min
Confidentialité : Publique
Responsable local :
Détails : Les données contiennent les **horaires de passages affichés aux usagers en temps réel et pour tous les arrêts des lignes de transport en commun de l'ensemble du réseau en Île-de-France**.
Points d'attention : RAS
Accès sécurisé Azure Datalake Storage : [offre-de-transport/prim/information-voyageur-temps-reel](https://dppdatalakeprddls01.dfs.core.windows.net/offre-de-transport/prim/information-voyageur-temps-reel/)


### Contenu du Gold
En gold, il y a un fichier `consolidated_temps-reel.parquet` :

- L'offre théorique à partir du 27/06/2023 au format tabulaire
- Avec les colonnes :

| Nom de colonne            | Type | Description |
|---------------------------|------|-------------|
| **RecordedAtTime**        | tbd  | tbd         |
| **LineRef**               | tbd  | tbd         |
| **StopPointRef**          | tbd  | tbd         |
| **DateVehicleJourneyRef** | tbd  | tbd         |
| **ExpectedDepartureTime** | tbd  | tbd         |
| **ExpectedArrivalTime**   | tbd  | tbd         |
| **AimedDepartureTime**    | tbd  | tbd         |
| **AimedArrivalTime**      | tbd  | tbd         |
| **DepartureStatus**       | tbd  | tbd         |
| **ArrivalStatus**         | tbd  | tbd         |
| **zone_stop_ide**         | tbd  | tbd         |
| **ArRId**                 | tbd  | tbd         |

Les données sont au format parquet, compressé avec `brotli`, partitionnées selon le jour.

### Contenu du Silver

### Contenu du Bronze

#

### Offre réalisée
Type de données : **Heures de passages théoriques, commandées, et réalisées du réseau de bus RATP Paris et Petite Couronne**
Source : IDFM/PRIM
Fréquence de mise à jour : Ponctuelle / à la demande
Confidentialité : Publique
Responsable local : Romain Périnet
Détails : Les données contiennent les **horaires de passages théoriques, commandés et réalisées de tous les arrêts des du réseau de bus RATP de Paris
et Petite Couronne pour les années 2022, 2023, 2024**.
Points d'attention : RAS
Accès sécurisé Azure Datalake Storage : [offre-de-transport/ratp/offre-realisee](https://dppdatalakedevls01.dfs.core.windows.net/offre-de-transport/ratp/offre-realisee/)


### Contenu du Gold
#### Ponctualité

| Nom de la colonne                                           | Type   | Description                                                                                                                                                                               |
|:------------------------------------------------------------|:-------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| LIGNE                                                       | string | Le numéro de la ligne de bus/tram/train concernée.                                                                                                                                        |
| NOMBRE_PASSAGES_THEORIQUES                                  | int64  | Nombre de passages théoriques total sur la période analysée.                                                                                                                              |
| NOMBRE_PASSAGES_REELS                                       | int64  | Nombre de passages réels total sur la période analysée. Ce nombre peut-être inférieur au nombre de passages théoriques, à de rares occasions il peut être supérieur.                      |
| SCORE_DE_CONFORMITE                                         | float  | La somme de l'ensemble des scores de conformité obtenus par arrêt et par course sur la ligne pour la période analysée et selon les règles de calcul précisées dans le cahier des charges. |
| SITUATION_INACCEPTABLE_RETARD                               | int64  | Le nombre de SI causées par un retard >12min ou 15min selon la fréquence de la ligne.                                                                                                     |
| SITUATION_INACCEPTABLE_AVANCE                               | int64  | Le nombre de SI causées par une avance >2min.                                                                                                                                             |
| SITUATION_INACCEPTABLE_THEORIQUE_SANS_HORAIRE_REEL_ATTRIBUE | int64  | Le nombre de SI causées par un horaire de passage réel absent (face à un horaire de passage théorique renseigné).                                                                         |
| SITUATION_INACCEPTABLE_TOTAL                                | int64  | La somme de l'ensemble des SI pour la ligne et la période analysée.                                                                                                                       |
| TAUX_DE_CONFORMITE                                          | float  | Le score de conformité / nombre de passages théoriques * 100.                                                                                                                                   |
| TAUX_ABSENCE_DE_DONNEES                                     | float  | (Le nombre de passages théoriques - le nombre de passages réels) / le nombre de passages théoriques * 100.                                                                                |

#### Régularité

| Nom de la colonne                                           | Type   | Description                                                                                                                                                                               |
|:------------------------------------------------------------|:-------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| LIGNE                                                       | string | Le numéro de la ligne de bus/tram/train concernée.                                                                                                                                        |
| NOMBRE_PASSAGES_THEORIQUES                                  | int64  | Nombre de passages théoriques total sur la période analysée.                                                                                                                              |
| NOMBRE_PASSAGES_REELS                                       | int64  | Nombre de passages réels total sur la période analysée. Ce nombre peut-être inférieur au nombre de passages théoriques, à de rares occasions il peut être supérieur.                      |
| SCORE_DE_CONFORMITE                                         | float  | La somme de l'ensemble des scores de conformité obtenus par arrêt et par course sur la ligne pour la période analysée et selon les règles de calcul précisées dans le cahier des charges. |
| SITUATION_INACCEPTABLE_TRAIN_DE_BUS                         | int64  | Le nombre de SI causées par un train de bus (moins de 2min d'écart avec le passage du bus précédent).                                                                                     |
| SITUATION_INACCEPTABLE_ECART_IMPORTANT                      | int64  | Le nombre de SI causées par un écart important avec le passage du bus précédent (plus de 2 fois l'écart théorique avec le bus précédent).                                                 |
| SITUATION_INACCEPTABLE_TOTAL                                | int64  | La somme de l'ensemble des SI pour la ligne et la période analysée.                                                                                                                       |
| TAUX_DE_CONFORMITE                                          | float  | Le score de conformité / nombre de passages théoriques * 100.                                                                                                                                   |
| TAUX_ABSENCE_DE_DONNEES                                     | float  | (Le nombre de passages théoriques - le nombre de passages réels) / le nombre de passages théoriques * 100.                                                                                |

#### Les niveaux d'aggrégation
Afin d'analyser plus finement certaines périodes et certaines situations, nous avons mis en place 3 niveaux d'agrégation :
- par jour
- par mois
- par période
- par période et type de journée (semaine, samedi, dimanche, vacances scolaires/plein trafic/été)
- par année
- par année et type de journée (semaine ou weekend)

Le calendrier qui a permis de déterminer les vacances scolaires, le plein trafic et les vacances d'été est disponible
ci-dessous :

**Vacances scolaires :**
- 01/01/2023 - 02/01/2023
- 19/02/2023 - 05/03/2023
- 23/04/2023 - 06/05/2023
- 01/09/2023 - 03/09/2023
- 22/10/2023 - 05/11/2023
- 24/12/2023 - 31/12/2023

**Été :**
- 01/07/2023 - 31/08/2023

**Plein trafic :**
- 03/01/2023 - 18/02/2023
- 06/03/2023 - 22/04/2023
- 09/05/2023 - 30/06/2023
- 04/09/2023 - 21/10/2023
- 06/11/2023 - 23/12/2023

#### Absence de données
- Par ligne :

| Nom de la colonne         | Type   | Description                                                                                                                                                                                                                                                                                             |
|:--------------------------|:-------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ligne                     | string | Numéro de la ligne de bus concernée                                                                                                                                                                                                                                                                     |
| nombre_courses_theoriques | int64  | Nombre total de courses théoriques pour la journée et pour la ligne                                                                                                                                                                                                                                     |                     |                                                                                                                                         |
| nombre_heures_theoriques  | int64  | Nombre total de passages avec une heure théorique                                                                                                                                                                                                                                                       |
| nombre_heures_reelles     | int64  | Nombre total de passages avec une heure de passage réalisée                                                                                                                                                                                                                                             |
| arret_non_realisee        | int64  | [Nombre de passage avec une heure théorique - Nombre de passage avec une heure réalisée] + [Nombre de passage avec une heure réalisée mais pas d'heure théorique] - [Nombre d'arrêt isolé dans une course qui contient une heure de passage théorique mais ne contient pas d'heure de passage réalisée] |
| course_non_realisee       | int64  | Nombre de courses dont tous les arrêts ont une heure de passage théorique mais pas d'heure de passage réalisée                                                                                                                                                                                          |
| arret_sans_donnees        | int64  | Nombre d'arrêt isolé dans une course qui contient une heure de passage théorique mais ne contient pas d'heure de passage réalisée                                                                                                                                                                       |
| injection_de_bus          | int64  | Nombre de passage avec une heure réalisée mais pas d'heure théorique                                                                                                                                                                                                                                    |
| total_donnees_manquantes  | int64  | [Nombre de passage avec une heure théorique - Nombre de passage avec une heure réalisée]                                                                                                                                                                                                                |

- Par arrêt :

| Nom de la colonne         | Type    | Description                                                                                                                                   |
|:--------------------------|:--------|:----------------------------------------------------------------------------------------------------------------------------------------------|
| ligne                     | string  | Numéro de la ligne de bus concernée                                                                                                           |
| arret                     | string  | Polygramme de l'arrêt concerné                                                                                                                |                     |                                                                                                                                         |
| nombre_heures_theoriques  | int64   | Nombre total de passages avec une heure théorique                                                                                             |
| nombre_heures_reelles     | int64   | Nombre total de passages avec une heure de passage réalisée                                                                                   |
| pourcentage_non_desservis | float64 | [Nombre de passage avec une heure théorique - Nombre de passage avec une heure réalisée] / [Nombre de passage avec une heure théorique] * 100 |

### Contenu du Silver

| Nom de la colonne | Type                | Description                                                                                                                             |
|:------------------|:--------------------|:----------------------------------------------------------------------------------------------------------------------------------------|
| COURSE_ID         | integer             | L'identifiant calculé de la course                                                                                                      |
| LIGNE             | string              | Le numéro de la ligne de bus/tram/train concernée.                                                                                      |                     |                                                                                                                                         |
| TM                | object              | Le tableau de marche du véhicule                                                                                                        |
| SENS              | string              | Le format des valeurs est `[arrêt_départ]->[terminus]`. Ex : "VIL->RAM".                                                                |
| SENS_ID           | integer             | Le sens, 0 pour aller 1 pour retour.                                                                                                    |
| ARRET             | string              | Le nom unique de l'arrêt. Si un arrêt est sur plusieurs lignes, le nom doit être le même.                                               |
| HEURE THEORIQUE   | datetime64[ns, UTC] | L'heure théorique de passage du bus/tram/train. Les valeurs de cette colonne doivent être au format datetime et sous la timezone "UTC". |
| HEURE REELLE      | datetime64[ns, UTC] | L'heure réelle de passage du bus/tram/train. Les valeurs de cette colonne doivent être au format datetime et sous la timezone "UTC".    |
| IS_TERMINUS       | boolean             | "False" si l'arrêt n'est pas le terminus de la course, "True" s'il s'agit du terminus.                                                  |
| ZdAId             | object              | L'identifiant de la zone d'Arrêt (basé sur le référentiel ICAR)                                                                         |
| ZdAName           | object              | Le nom de la zone d'Arrêt (basé sur le référentiel ICAR)                                                                                |




### Contenu du Bronze
Les données bronze sont des fichiers au format csv partitionnées par mois. Un fichier csv contient les horaires de passages théoriques, commandés,
et réalisées ainsi que des informations contextuelles supplémentaires pour **1 ligne** et **1 jour**.
#

### Info-trafic

Type de données : **Informations sur les perturbations des transports en IDF**
Source : IDFM/PRIM
Fréquence de mise à jour : Toutes les 5min
Confidentialité : Publique
Responsable local :
Détails : Les données contiennent les **informations (messages, lignes et arrêts impactés...) sur les perturbations des lignes de transport en commun de l'ensemble du réseau en Île-de-France**.
Points d'attention : RAS
Accès sécurisé Azure Datalake Storage : [offre-de-transport/prim/infos-traffic](https://dppdatalakeprddls01.dfs.core.windows.net/offre-de-transport/prim/infos-traffic/)


### Contenu du Gold
Pas encore construit

### Contenu du Silver
Les données silver sont des fichiers au format parquet (disruptions.parquet et line_reports.parquet) partitionnés par jour et par tranche de 5 minutes.
Toutes les colonnes des fichiers bronze ont été conservées, à l'exception des colonnes redondantes au référentiel des lignes (déjà exposé dans le datalake).

#### Disruptions
| Nom de colonne                                       | Type           | Description                                                                             |
|------------------------------------------------------|----------------|-----------------------------------------------------------------------------------------|
| **id**                                               | object         | Identifiant technique                                                                   |
| **disruption_id**                                    | object         | Identifiant de la perturbation                                                          |
| **impact_id**                                        | object         | Identifiant de l'impact                                                                 |
| **application_periods**                              | object         | Période d'application de la perturbation (date et heure de début, date et heure de fin) |
| **status**                                           | object         | Statut de la perturbation (active, past, future)                                        |
| **updated_at**                                       | datetime64[ns] | Date de dernière mise à jour de la perturbation                                         |
| **cause**                                            | object         | Cause (perturbation, travaux, information)                                              |
| **category**                                         | object         | Catégorie (incidents, communication)                                                    |
| **uri**                                              | object         | URI                                                                                     |
| **disruption_uri**                                   | object         | URI de la perturbation                                                                  |
| **contributor**                                      | object         | Contributeur                                                                            |
| **severity.name**                                    | object         | Sévérité (perturbée, bloquante, information)                                            |
| **severity.effect**                                  | object         | Effet (Délais importants, pas de service, autres)                                       |
| **severity.color**                                   | object         | Couleur associée à la sévérité                                                          |
| **severity.priority**                                | int64          | Priorité                                                                                |
| **tags**                                             | object         | Tags associés (ex: Actualité, Ascenseur...)                                             |
| **application_patterns**                             | object         | Motif répétitif d'application de la perturbation                                        |
| **properties**                                       | object         | Propriétés                                                                              |
| **messages_text**                                    | object         | Messages                                                                                |
| **messages_channel_id**                              | object         | Identifiant du channel du message                                                       |
| **messages_channel_content_type**                    | object         | Type de contenu (ex: text/html, text/plain)                                             |
| **messages_channel_name**                            | object         | Nom du channel (ex: titre, moteur, sms ascenseurs...)                                   |
| **messages_channel_types**                           | object         | Type de channel (ex: web, email, sms...)                                                |
| **impacted_objects_pt_object_id**                    | object         | Identifiant de l'objet impacté                                                          |
| **impacted_objects_pt_object_name**                  | object         | Nom de l'objet impacté                                                                  |
| **impacted_objects_impacted_section**                | float64        | Section impactée                                                                        |
| **impacted_objects_impacted_rail_section**           | float64        | Section ferrée impactée                                                                 |
| **impacted_objects_impacted_section_from_id**        | object         | Identifiant de la zone d'arrêt du début de la section impactée                          |
| **impacted_objects_impacted_section_from_name**      | object         | Nom de la zone d'arrêt du début de la section impactée                                  |
| **impacted_objects_impacted_section_to_id**          | object         | Identifiant de la zone d'arrêt de la fin de la section impactée                         |
| **impacted_objects_impacted_section_to_name**        | object         | Nom de la zone d'arrêt de la fin de la section impactée                                 |
| **impacted_objects_impacted_section_routes**         | object         | Itinéraire de la section impactée                                                       |
| **impacted_objects_impacted_rail_section_from_id**   | object         | Identifiant de la zone d'arrêt du début de la section ferrée impactée                   |
| **impacted_objects_impacted_rail_section_from_name** | object         | Nom de la zone d'arrêt du début de la section ferrée impactée                           |
| **impacted_objects_impacted_rail_section_to_id**     | object         | Identifiant de la zone d'arrêt de la fin de la section ferrée impactée                  |
| **impacted_objects_impacted_rail_section_to_name**   | object         | Nom de la zone d'arrêt de la fin de la section ferrée impactée                          |
| **impacted_objects_impacted_rail_section_routes**    | object         | Itinéraire de la section ferrée impactée                                                |

#### Line-reports
| Nom de colonne                | Type   | Description                                          |
|-------------------------------|--------|------------------------------------------------------|
| **pt_objects_id**             | object | Identifiant de l'objet impacté par la perturbation   |
| **pt_objects_name**           | object | Nom de l'objet impacté par la perturbation           |
| **pt_objects_quality**        | int64  | Qualité de l'objet impacté (à vérifier)              |
| **line.id**                   | object | Identifiant de la ligne impactée par la perturbation |
| **line.name**                 | object | Nom de la ligne impactée par la perturbation         |
| **line.code**                 | object | Nom court de la ligne impactée par la perturbation   |
| **line.color**                | object | Couleur spécifique à la ligne impactée               |
| **line.text_color**           | object | Couleur du texte spécifique à la ligne impactée      |
| **line.physical_modes_id**    | object | Identifiant du mode physique                         |
| **line.physical_modes_name**  | object | Nom du mode physique                                 |
| **line.commercial_mode.id**   | object | Identifiant du mode commercial                       |
| **line.commercial_mode.name** | object | Nom du mode commercial                               |
| **line.network.id**           | object | Identifiant du réseau                                |
| **line.network.name**         | object | Nom du réseau                                        |
| **line.network.codes_type**   | object | Type du code réseau                                  |
| **line.network.codes_value**  | object | Code réseau                                          |
| **line.geojson.type**         | object | Type de geojson                                      |
| **line.links_templated**      | object | Lien template (True ou False)                        |
| **line.links_rel**            | object | Relation du lien                                     |
| **line.links_internal**       | object | Lien interne (True ou False)                         |
| **line.links_type**           | object | Type de lien                                         |
| **line.links_id**             | object | Identifiant du lien                                  |

### Contenu du Bronze
Les données bronze sont des fichiers au format json (disruptions.json et line_reports.json) partitionnés par jour et par tranche de 5 minutes.

#

## Usager

### Recherche d'itinéraires

Les données contiennent toutes les **requêtes effectuées sur le calculateur d'itinéraire IDFM**.

- Liens dans le
  datalake : [usager/prim/recherche-itineraire](https://dppdatalakeprddls01.dfs.core.windows.net/usager/prim/recherche-itineraire/)

### Contenu des User Interfaces

Trois user interfaces ont été construits pour gérer au mieux les dashboards Power BI :
  - **aggregated_deplacement_by_date_start_stop** :
  - **aggregated_deplacement_by_stop_and_scenario** :
  - **aggregated_requete_by_date_start_stop** :

#### Table aggregated_deplacement_by_date_start_stop

| Nom de la colonne           | Type                | Description                                          | Origine dans le gold (déplacement) |
|-----------------------------|---------------------|------------------------------------------------------|------------------------------------|
| requete_date_arrondie       | datetime64[us, UTC] | Date de la requête arrondie à l'heure                | requete_date                       |
| heure                       | int32               | Heure de la requête                                  | requete_date                       |
| date_recherchee_arrondie    | datetime64[ns, UTC] | Date recherchée par l'utilisateur arrondie à l'heure | requete_date_recherchee            |
| heure_recherchee            | int32               | Heure de la date recherchée par l'utilisateur        | requete_date_recherchee            |
| requete_tag_recommande      | object              | Best ou Best Olympique en fonction du tag recommandé | requete_tag_recommande             |
| requete_poi_origine         | object              | POI d'origine de la requête                          | requete_poi_origine                |
| requete_poi_destination     | object              | POI de destination de la requête                     | requete_poi_destination            |
| count_requete               | int64               | Nombre de requête faite                              |                                    |
| count_sans_trajet           | int64               | Nombre de réponse sans trajet retournée par l'api    |                                    |
| count_best                  | int64               | Nombre de réponse avec le tag best                   |                                    |
| count_best_olympics         | int64               | Nombre de réponse avec le tag best_olympics          |                                    |

#### Table aggregated_deplacement_by_stop_and_scenario

| Nom de la colonne          | Type                | Description                            | Origine dans le gold (déplacement) ou dans opg_status |
|----------------------------|---------------------|----------------------------------------|-------------------------------------------------------|
| scenarios_id               | object              | ID du scénario                         | id (opg_status)                                       |
| stop_points.id             | object              | ID de l'arrêt                          | stop_points.id (opg_status)                           |
| stop_points.name           | object              | Nom de l'arrêt                         | stop_points.name (opg_status)                         |
| from_datetime              | datetime64[ns, UTC] |                                        | from_datetime (opg_status)                            |
| to_datetime                | datetime64[ns, UTC] |                                        | to_datetime (opg_status)                              |
| requete_date               | datetime64[ns, UTC] | Date de la requête                     | requete_date (déplacement)                            |
| requete_date_recherchee    | datetime64[ns, UTC] | Date recherchée par l'utilisateur      | requete_date_recherchee (déplacement)                 |
| count_poi_origine          | int64               | Nombre de réponse partant de POI       |                                                       |
| count_scenario_origine     | int64               |                                        |                                                       |
| stops_target               | float64             |                                        |                                                       |
| count_poi_destination      | int64               | Nombre de réponse finissant sur un POI |                                                       |
| count_scenario_destination | int64               |                                        |                                                       |

#### Table aggregated_requete_by_date_start_stop

| Nom de la colonne           | Type                | Description                                                                         | Origine dans le gold (requete) |
|-----------------------------|---------------------|-------------------------------------------------------------------------------------|--------------------------------|
| requete_date_arrondie       | datetime64[us, UTC] | Date de la requête arrondie à l'heure                                               | requete_date                   |
| heure                       | int32               | Heure de la requête                                                                 | requete_date                   |
| date_recherchee_arrondie    | datetime64[ns, UTC] | Date recherchée par l'utilisateur arrondie à l'heure                                | requete_date_recherchee        |
| heure_recherchee            | int32               | Heure de la date recherchée par l'utilisateur                                       | requete_date_recherchee        |
| requete_tag_recommande      | object              | Best ou Best Olympique en fonction du tag recommandé                                | requete_tag_recommande         |
| requete_tag_prevision       | object              | Information sur si la requête est pour un déplacement en temps réel ou prévisionnel | requete_tag_prevision          |
| requete_point_depart        | object              | Point de départ de la requête                                                       | requete_point_depart           |
| requete_point_depart_iris   | object              | Code Iris du point de départ                                                        | requete_point_depart_iris      |
| requete_point_arrivee       | object              | Point d'arrivée de la requête                                                       | requete_point_arrivee          |
| requete_point_arrivee_iris  | object              | Code Iris du point d'arrivée                                                        | requete_point_arrivee_iris     |
| requete_has_poi             | object              | "True" si la requête passe par un POI, "False" sinon                                | requete_has_poi                |
| requete_has_poi_origine     | bool                | "True" si le point de départ est un POI, "False" sinon                              | requete_has_poi_origine        |
| requete_has_poi_destination | bool                | "True" si le point d'arrivée est un POI, "False" sinon                              | requete_has_poi_destination    |
| requete_poi_origine         | object              | POI d'origine de la requête                                                         | requete_poi_origine            |
| requete_poi_destination     | object              | POI de destination de la requête                                                    | requete_poi_destination        |
| count                       | int64               | Compte du nombre de requête                                                         |                                |

### Contenu des Golds

Trois golds ont été construits pour répondre au besoin des consommateurs de la données et proposer different niveau de rafraîchissement et de granularité des données.
Plus le niveau d'aggregation est important plus la donnée est légère et plus fréquemment elle peut être mise à jour.
Les niveaux d'aggregation sont les suivants :
  - **Requête** : Une ligne par requête - Informations sur la requête et le trajet recommandé renvoyé par le calculateur.
  - **Déplacement** : Une ligne par déplacements renvoyés - Informations sur chaque déplacements et les requêtes associées.
  - **Trajet** : Une ligne par trajet - Information sur chaque trajets - les deplacements et requêtes associées.

#### Table de requêtes

| Nom de la colonne                              | Type       | Description                                                                         | Origine dans le silver                                        |
|------------------------------------------------|------------|-------------------------------------------------------------------------------------|---------------------------------------------------------------|
| date                                           | object     | Date du fichier                                                                     | date(filename_datetime)                                       |
| heure                                          | object     | Heure du fichier                                                                    | date(filename_datetime)                                       |
| id_requete                                     | object     | Identifiant technique de la requête                                                 | request_id                                                    |
| requete_date                                   | datetime64 | Date de la requête                                                                  | date(filename_datetime)                                       |
| requete_date_recherchee                        | object     | Date et heure recherchée par l'utilisateur pour le déplacement                      | request_body.date                                             |
| requete_date_recherchee_est_au_depart          | object     | Information sur si la date recherchée est au départ ou à l'arrivée                  | request_body.date                                             |
| requete_usager_a_mobilite_reduite              | object     | Information sur si l'utilisateur est à mobilité réduite                             | request_body.journey_profil                                   |
| requete_has_poi                                | bool       | "True" si la requête comporte un POI, "False" sinon                                 | request_body.has_poi                                          |
| requete_has_poi_origine                        | bool       | "True" si le point de départ est un POI, "False" sinon                              | request_body.poi_origine                                      |
| requete_has_poi_destination                    | bool       | "True" si le point d'arrivée est un POI, "False" sinon                              | request_body.poi_destination                                  |
| requete_poi_origine                            | object     | POI d'origine si "requete_has_poi_origine" est à "True"                             | request_body.poi_origine                                      |
| requete_poi_destination                        | object     | POI de destination si "requete_has_poi_destination" est à "True"                    | request_body.poi_destination                                  |
| requete_scenario                               | object     | Scénario OPG Status associé                                                         | request_body.poi_origine                                      |
| requete_point_depart                           | object     | Point de départ de l'utilisateur                                                    | request_body.departure.id                                     |
| requete_point_arrivee                          | object     | Point d'arrivée de l'utilisateur                                                    | request_body.arrival.id                                       |
| requete_type_depart                            | object     | Type du point de départ                                                             | request_body.departure.type                                   |
| requete_type_arrivee                           | object     | Type du point d'arrivée                                                             | request_body.arrival.type                                     |
| requete_point_depart_iris                      | object     | Code Iris du point de départ                                                        | CODE_IRIS (referentiel iris)                                  |
| requete_point_arrivee_iris                     | object     | Code Iris du point d'arrivée                                                        | CODE_IRIS (referentiel iris)                                  |
| requete_deplacement_date_depart_recommande     | object     | Date et heure de départ du déplacement recommandé                                   | response_body.journey.departure_date_time                     |
| requete_deplacement_date_arrivee_recommande    | object     | Date et heure d'arrivée du déplacement recommandé                                   | response_body.journey.arrival_date_time                       |
| requete_deplacement_temps_total_recommande     | float64    | Temps total du déplacement recommandé                                               | response_body.journey.total_duration                          |
| requete_tag_recommande                         | object     | Best ou Best Olympique en fonction du tag recommandé                                | response_body.journey.type                                    |
| requete_deplacement_type_de_service_recommande | object     | Type de service du déplacement recommandé                                           | service_type                                                  |
| requete_tag_prevision                          | object     | Information sur si la requête est pour un déplacement en temps réel ou prévisionnel | filename_datetime & response_body.journey.departure_date_time |
| requete_preferences_train_rer                  | object     | Préférence de l'utilisateur, priorité au trajet en train                            | request_body.preferences_bus_train_rer                        |
| requete_preferences_metro                      | object     | Préférence de l'utilisateur, priorité au trajet en métro                            | request_body.preferences_metro                                |
| requete_preferences_tram                       | object     | Préférence de l'utilisateur, priorité au trajet en tram                             | request_body.preferences_tram                                 |
| requete_preferences_bus                        | object     | Préférence de l'utilisateur, priorité au trajet en bus                              | request_body.preferences_bus                                  |
| requete_preferences_vitesse_marche             | object     | Vitesse de marche de l'utilisateur (lente, normale, rapi                            | request_body.preferences_vitesse_marche                       |
| requete_preferences_vitesse_velo               | object     | Vitesse à vélo de l'utilisateur (lente, normale, rapide)                            | request_body.preferences_vitesse_velo                         |

#### Table de deplacements

| Nom de la colonne                     | Type       | Description                                                                         | Origine dans le silver                                        |
|---------------------------------------|------------|-------------------------------------------------------------------------------------|---------------------------------------------------------------|
| date                                  | object     | Date du fichier                                                                     | date(filename_datetime)                                       |
| heure                                 | object     | Heure du fichier                                                                    | date(filename_datetime)                                       |
| id_requete                            | object     | Identifiant technique de la requête                                                 | request_id                                                    |
| requete_date                          | datetime64 | Date de la requête                                                                  | date(filename_datetime)                                       |
| requete_date_recherchee               | object     | Date et heure recherchée par l'utilisateur pour le déplacement                      | request_body.date                                             |
| requete_date_recherchee_est_au_depart | object     | Information sur si la date recherchée est au départ ou à l'arrivée                  | request_body.date                                             |
| requete_usager_a_mobilite_reduite     | object     | Information sur si l'utilisateur est à mobilité réduite                             | request_body.journey_profil                                   |
| requete_has_poi                       | bool       | "True" si la requête comporte un POI, "False" sinon                                 | request_body.has_poi                                          |
| requete_has_poi_origine               | bool       | "True" si le point de départ est un POI, "False" sinon                              | request_body.poi_origine                                      |
| requete_has_poi_destination           | bool       | "True" si le point d'arrivée est un POI, "False" sinon                              | request_body.poi_destination                                  |
| requete_poi_origine                   | object     | POI d'origine si "requete_has_poi_origine" est à "True"                             | request_body.poi_origine                                      |
| requete_poi_destination               | object     | POI de destination si "requete_has_poi_destination" est à "True"                    | request_body.poi_destination                                  |
| requete_scenario                      | object     | Scénario OPG Status associé                                                         | request_body.poi_origine                                      |
| requete_tag_prevision                 | object     | Information sur si la requête est pour un déplacement en temps réel ou prévisionnel | filename_datetime & response_body.journey.departure_date_time |
| id_deplacement                        | object     | Identifiant technique du déplacement                                                | response_id                                                   |
| deplacement_type                      | object     | Le type du déplacement (meilleur, avec moins de marche, moins de changements, ...)  | response_body.journey.type                                    |
| deplacement_tags                      | object     | Tags liés au déplacement (marche, écologique, ...)                                  | response_body.journey.type                                    |
| deplacement_mode                      | object     | ???                                                                                 | response_body.journey.mode                                    |
| deplacement_type_de_service           | object     | Type de service du déplacement (à vélo, en transport, à pied, ...)                  | service_type                                                  |
| deplacement_date_depart               | object     | Date et heure de départ prévue du déplacement                                       | response_body.journey.departure_date_time                     |
| deplacement_date_arrivee              | object     | Date et heure d'arrivée prévue du déplacement                                       | response_body.journey.arrival_date_time                       |
| deplacement_temps_total               | float64    | Temps total du déplacement                                                          | response_body.journey.total_duration                          |
| requete_point_depart                  | object     | Point de départ de l'utilisateur                                                    | request_body.departure.id                                     |
| requete_point_arrivee                 | object     | Point d'arrivée de l'utilisateur                                                    | request_body.arrival.id                                       |
| requete_type_depart                   | object     | Type du point de départ                                                             | request_body.departure.type                                   |
| requete_type_arrivee                  | object     | Type du point d'arrivée                                                             | request_body.arrival.type                                     |
| requete_point_depart_iris             | object     | Code Iris du point de départ                                                        | CODE_IRIS (referentiel iris)                                  |
| requete_point_arrivee_iris            | object     | Code Iris du point d'arrivée                                                        | CODE_IRIS (referentiel iris)                                  |
| requete_preferences_train_rer         | object     | Préférence de l'utilisateur, priorité au trajet en train/RER                        | response_body.journey.departure_date_time                     |
| requete_preferences_metro             | object     | Préférence de l'utilisateur, priorité au trajet en métro                            | response_body.journey.arrival_date_time                       |
| requete_preferences_tram              | object     | Préférence de l'utilisateur, priorité au trajet en tram                             | response_body.journey.total_duration                          |
| requete_preferences_bus               | object     | Préférence de l'utilisateur, priorité au trajet en bus                              | response_body.journey.type                                    |
| requete_preferences_vitesse_marche    | object     | Vitesse de marche de l'utilisateur (lente, normale, rapide)                         | service_type                                                  |
| requete_preferences_vitesse_velo      | object     | Vitesse à vélo de l'utilisateur (lente, normale, rapide)                            | filename_datetime & response_body.journey.departure_date_time |
| deplacement_premiere_arret            | object     | Premier arrêt du déplacement                                                        | response_body.journey.connections.id                          |
| deplacement_derniere_arret            | object     | Dernier arrêt du déplacement                                                        | response_body.journey.connections.id                          |
| deplacement_premiere_ligne            | object     | Première ligne du déplacement                                                       | response_body.journey.connections.line.id                     |
| deplacement_derniere_ligne            | object     | Dernière ligne du déplacement                                                       | response_body.journey.connections.line.id                     |
| deplacement_is_tag_recommande         | bool       | "True" si le trajet est recommandé, "False" sinon                                   | response_body.journey.type                                    |
| deplacement_nombre_correspondance     | int64      | Nombre de correspondance du déplacement                                             | count(response_body.journey.connections)                      |

#### Table de trajets

| Nom de la colonne                     | Type       | Description                                                                         | Origine dans le silver                                        |
|---------------------------------------|------------|-------------------------------------------------------------------------------------|---------------------------------------------------------------|
| date                                  | object     | Date du fichier                                                                     | date(filename_datetime)                                       |
| heure                                 | object     | Heure du fichier                                                                    | date(filename_datetime)                                       |
| id_requete                            | object     | Identifiant technique de la requête                                                 | request_id                                                    |
| requete_date                          | datetime64 | Date de la requête                                                                  | date(filename_datetime)                                       |
| requete_date_recherchee               | object     | Date et heure recherchée par l'utilisateur pour le déplacement                      | request_body.date                                             |
| requete_date_recherchee_est_au_depart | object     | Information sur si la date recherchée est au départ ou à l'arrivée                  | request_body.date                                             |
| requete_usager_a_mobilite_reduite     | object     | Information sur si l'utilisateur est à mobilité réduite                             | request_body.journey_profil                                   |
| requete_has_poi                       | bool       | "True" si la requête comporte un POI, "False" sinon                                 | request_body.has_poi                                          |
| requete_has_poi_origine               | bool       | "True" si le point de départ est un POI, "False" sinon                              | request_body.poi_origine                                      |
| requete_has_poi_destination           | bool       | "True" si le point d'arrivée est un POI, "False" sinon                              | request_body.poi_destination                                  |
| requete_poi_origine                   | object     | POI d'origine si "requete_has_poi_origine" est à "True"                             | request_body.poi_origine                                      |
| requete_poi_destination               | object     | POI de destination si "requete_has_poi_destination" est à "True"                    | request_body.poi_destination                                  |
| requete_scenario                      | object     | Scénario OPG Status associé                                                         | request_body.poi_origine                                      |
| requete_tag_prevision                 | object     | Information sur si la requête est pour un déplacement en temps réel ou prévisionnel | filename_datetime & response_body.journey.departure_date_time |
| requete_preferences_train_rer         | object     | Préférence de l'utilisateur, priorité au trajet en train/RER                        | response_body.journey.departure_date_time                     |
| requete_preferences_metro             | object     | Préférence de l'utilisateur, priorité au trajet en métro                            | response_body.journey.arrival_date_time                       |
| requete_preferences_tram              | object     | Préférence de l'utilisateur, priorité au trajet en tram                             | response_body.journey.total_duration                          |
| requete_preferences_bus               | object     | Préférence de l'utilisateur, priorité au trajet en bus                              | response_body.journey.type                                    |
| requete_preferences_vitesse_marche    | object     | Vitesse de marche de l'utilisateur (lente, normale, rapide)                         | service_type                                                  |
| requete_preferences_vitesse_velo      | object     | Vitesse à vélo de l'utilisateur (lente, normale, rapide)                            | filename_datetime & response_body.journey.departure_date_time |
| id_deplacement                        | object     | Identifiant technique du déplacement                                                | response_id                                                   |
| deplacement_type                      | object     | Le type du déplacement (meilleur, avec moins de marche, moins de changements, ...)  | response_body.journey.type                                    |
| deplacement_tags                      | object     | Tags liés au déplacement (marche, écologique, ...)                                  | response_body.journey.type                                    |
| deplacement_type_de_service           | object     | Type de service du déplacement (à vélo, en transport, à pied, ...)                  | service_type                                                  |
| deplacement_mode                      | object     | ???                                                                                 | response_body.journey.type                                    |
| deplacement_date_depart               | object     | Date et heure de départ prévue du déplacement                                       | response_body.journey.departure_date_time                     |
| deplacement_date_arrivee              | object     | Date et heure d'arrivée prévue du déplacement                                       | response_body.journey.arrival_date_time                       |
| deplacement_temps_total               | float64    | Temps total du déplacement                                                          | response_body.journey.total_duration                          |
| requete_point_depart                  | object     | Point de départ de l'utilisateur                                                    | request_body.departure.id                                     |
| requete_point_arrivee                 | object     | Point d'arrivée de l'utilisateur                                                    | request_body.arrival.id                                       |
| requete_type_depart                   | object     | Type du point de départ                                                             | request_body.departure.type                                   |
| requete_type_arrivee                  | object     | Type du point d'arrivée                                                             | request_body.arrival.type                                     |
| requete_point_depart_iris             | object     | Code Iris du point de départ                                                        | CODE_IRIS (referentiel iris)                                  |
| requete_point_arrivee_iris            | object     | Code Iris du point d'arrivée                                                        | CODE_IRIS (referentiel iris)                                  |
| deplacement_premiere_arret            | object     | Premier arrêt du déplacement                                                        | response_body.journey.connections.id                          |
| deplacement_derniere_arret            | object     | Dernier arrêt du déplacement                                                        | response_body.journey.connections.id                          |
| deplacement_is_tag_recommande         | bool       | "True" si le trajet est recommandé, "False" sinon                                   | response_body.journey.type                                    |
| deplacement_nombre_correspondance     | int64      | Nombre de correspondance du déplacement                                             | count(response_body.journey.connections)                      |
| id_trajet                             | object     | Identifiant technique du trajet                                                     | connection_id                                                 |
| trajet_ordre                          | int64      | Numéro de séquence du trajet                                                        | sequence_order                                                |
| trajet_mode                           | object     | Mode de transport du trajet                                                         | response_body.journey.connection.mode                         |
| trajet_ligne_id                       | object     | ID de la ligne de transport                                                         | response_body.journey.connection.line.id                      |
| trajet_ligne_code                     | object     | Nom de la ligne de transport                                                        | response_body.journey.connection.line.code                    |
| trajet_duree                          | float64    | Temps du trajet                                                                     | response_body.journey.connection.duration                     |
| trajet_depart_id                      | object     | ID du point de départ du trajet                                                     | response_body.journey.connection.departure.id                 |
| trajet_arrivee_id                     | object     | ID du point d'arrivée du trajet                                                     | response_body.journey.connection.arrival.id                   |
| trajet_depart_type                    | object     | Type du point de départ du trajet                                                   | response_body.journey.connection.departure.type               |
| trajet_arrivee_type                   | object     | Type du point d'arrivée du trajet                                                   | response_body.journey.connection.arrival.type                 |
| trajet_depart_iris                    | object     | Code Iris du point de départ du trajet                                              | CODE_IRIS (referentiel iris)                                  |
| trajet_arrivee_iris                   | object     | Code Iris du point d'arrivée du trajet                                              | CODE_IRIS (referentiel iris)                                  |

### Contenu du Silver

Contient la majorité des informations présentes dans le bronze dans un format tabulaire aplatit et explosé par trajet.
Les coordonnées GPS sont remplacées par leur équivalent [IRIS](https://www.insee.fr/fr/information/7708995) pour anonymiser les données.

### Contenu du Bronze

Type de données : **Historisation de toutes les requêtes effectuées sur l'outil de recherche d'itinéraire proposé par IDFM**
Source : IDFM/PRIM
Format : JSON
Fréquence de mise à jour : Toutes les minutes
Confidentialité : Privée
Responsable local :
Détails : Les données contiennent les **informations sur les requêtes et les réponses des appels fait à l'API de recherche d'itineraire d'IDFM**. Les principales informations disponibles sont :
  - Les paramètres de requêtes :
    - Heure de requête
    - Heure de départ et d'arrivée souhaitée
    - Point de départ et d'arrivée souhaité
    - Mode de transport
  - Les réponses différentes réponses proposées par le calculateurs :
    - Heure de départ et d'arrivée des déplacements suggérés
    - Temps de déplacement
    - Distance à parcourir à pied
    - Type de deplacement proposé (ex: "Déplacement recommandé", "Avec le moins de marche a pied", "Le plus rapide"...)
    - Détail du déplacement (Composé de plusieurs trajets, un trajet par ligne, itineraire de marche a pied...)
Points d'attention : RAS
Accès sécurisé Azure Datalake Storage : [usager/prim/recherche-itineraire/bronze](https://dppdatalakeprddls01.dfs.core.windows.net/usager/prim/recherche-itineraire/bronze)


### Assistance téléphonique

Les données contiennent **l'historique des appels de l'assistance téléphonique**.
Accès sécurisé Azure Datalake Storage : [usager/dexem/assitance-telephonqieu](https://dppdatalakeprddls01.dfs.core.windows.net/usager/dexem/assitance-telephonique/)

### Contenu du Gold

- Les fichiers gold sont partitionnés par jour avec les colonnes suivantes :

| Nom de colonne             | Type                  | Description                                            |
|----------------------------|-----------------------|--------------------------------------------------------|
| **uuid**                   | object                | UUID                                                   |
| **session**                | object                | Code de la session                                     |
| **caller_number**          | object                | Code du numéro appelant                                |
| **started_at_date**        | object                | Date à laquelle l'appel à commencé                     |
| **started_at_time**        | datetime64[ns, UTC]   | Date et heure à laquelle l'appel à commencé            |
| **ended_at_date**          | object                | Date à laquelle l'appel s'est fini                     |
| **ended_at_time**          | datetime64[ns, UTC]   | Date et heure à laquelle l'appel s'est fini            |
| **answered**               | object                | "True" s'il y a eu une réponse                         |
| **call_duration**          | int64                 | Durée de l'appel                                       |
| **ring_duration**          | int64                 | Durée de la sonnerie                                   |
| **talk_duration**          | float64               | Durée de la discussion                                 |
| **termination**            | object                | Tag lié à la colonne answered (Caller, Answered)       |
| **called_number**          | int64                 | Le numéro de téléphone appelé                          |
| **application**            | object                | SIV Ile-de-France Mobilités                            |
| **Intention**              | object                | Le motif de l'appel                                    |
| **DSP**                    | object                | Code de la DSP                                         |
| **Opérateur de Transport** | object                | Nom de l'opérateur de transport                        |
| **Service**                | object                | Nom du service                                         |
| **Traitement**             | object                | Routage,Dissuasion,etc...                              |
| **Ville**                  | object                | Nom de la ville                                        |
| **Arrêt**                  | float64               | Nom de l'arrêt                                         |
| **Ligne**                  | object                | Numéro de la ligne                                     |
| **interactions**           | object                | Commentaires                                           |
| **last_tags**              | object                | Accueil IDFM,Annonce HO,Traitement : Dissuasion,etc... |


### Contenu du Silver

Les données silver sont des fichiers au format parquet partitionnés par jour.
Toutes les colonnes des fichiers bronze ont été conservées.

### Contenu du Bronze

Format : JSON
Fréquence de mise à jour : Tous les jours


# Référentiels

## Arrêt

### Contenu du Gold

Détails : Les données contiennent **les informations sur les arrêts à différents niveaux de granularité** (selon les types d'arrêts)

[Documentation Référentiel Arrêt](../business_info/referentiel_arret_xml.md)

Accès sécurisé Azure Datalake Storage : [referentiels/prim/icar](https://dppdatalakeprddls01.dfs.core.windows.net/referentiels/prim/icar/)

Le gold contient plusieurs fichiers selon la granularité :

    - real_time_stop_point_ref.parquet
    - stop_point_ref_monomodale.parquet
    - stop_point_ref_monomodale_multimodale.parquet
    - stop_point_ref_multimodale.parquet
    - stop_point_ref_multimodale_pole.parquet
    - stop_point_ref_pole.parquet
    - stop_point_ref_stop.parquet
    - stop_point_ref_transporteur.parquet
    - stop_point_ref_transporteur_stop.parquet

Avec les colonnes :

- real_time_stop_point_ref.parquet

| Nom de colonne       | Type   | Description |
|----------------------|--------|-------------|
| **PdEId**            | object | tbd         |
| **PdEName**          | object | tbd         |
| **PdEVersion**       | object | tbd         |
| **ZdCId**            | object | tbd         |
| **ZdCVersion**       | object | tbd         |
| **ZdCXEpsg2154**     | object | tbd         |
| **ZdCYEpsg2154**     | object | tbd         |
| **ZdCName**          | object | tbd         |
| **ZdCType**          | object | tbd         |
| **ZdAId**            | object | tbd         |
| **ZdAVersion**       | object | tbd         |
| **ZdAXEpsg2154**     | object | tbd         |
| **ZdAYEpsg2154**     | object | tbd         |
| **ZdAName**          | object | tbd         |
| **ZdAType**          | object | tbd         |
| **ArRId**            | object | tbd         |
| **ArRVersion**       | object | tbd         |
| **ArRXEpsg2154**     | object | tbd         |
| **ArRYEpsg2154**     | object | tbd         |
| **ArRName**          | object | tbd         |
| **ArRType**          | object | tbd         |
| **ArTId**            | object | tbd         |
| **ArTVersion**       | object | tbd         |
| **ArTXEpsg2154**     | object | tbd         |
| **ArTYEpsg2154**     | object | tbd         |
| **ArTName**          | object | tbd         |
| **ArTType**          | object | tbd         |

- stop_point_ref_monomodale.parquet

| Nom de colonne         | Type   | Description                |
|------------------------|--------|----------------------------|
| **ZdAVersion**         | object | version                    |
| **ZdAld**              | object | code                       |
| **ZdAName**            | object | nom                        |
| **ZdAType**            | object | type de moyen de transport |
| **ZdAXEpsg2154**       | object | coordonnées x              |
| **ZdAYEpsg2154**       | object | coordonnées y              |

- stop_point_ref_monomodale_multimodale.parquet

| Nom de colonne  | Type   | Description            |
|-----------------|--------|------------------------|
| **ZdCId**       | object | id zone correspondance |
| **ZdAId**       | object | id zone arrêt          |

- stop_point_ref_multimodale.parquet

| Nom de colonne         | Type   | Description                |
|------------------------|--------|----------------------------|
| **ZdCVersion**         | object | version                    |
| **ZdCId**              | object | code                       |
| **ZdCName**            | object | nom                        |
| **ZdCType**            | object | type de moyen de transport |
| **ZdCXEpsg2154**       | object | coordonnées x              |
| **ZdCYEpsg2154**       | object | coordonnées y              |

- stop_point_ref_multimodale_pole.parquet

| Nom de colonne | Type   | Description            |
|----------------|--------|------------------------|
| **PdEId**      | object | id pole d'échange      |
| **ZdCId**      | object | id zone correspondance |

- stop_point_ref_pole.parquet

| Nom de colonne         | Type   | Description |
|------------------------|--------|-------------|
| **PdEVersion**         | object | version     |
| **PdEId**              | object | code        |
| **PdEName**            | object | nom         |

- stop_point_ref_stop.parquet

| Nom de colonne         | Type   | Description                |
|------------------------|--------|----------------------------|
| **ArRVersion**         | object | version                    |
| **ArRId**              | object | code                       |
| **ArRName**            | object | nom                        |
| **ArRType**            | object | type de moyen de transport |
| **ArRXEpsg2154**       | object | coordonnée x               |
| **ArRYEpsg2154**       | object | coordonnée y               |

- stop_point_ref_transporteur.parquet

| Nom de colonne         | Type   | Description                |
|------------------------|--------|----------------------------|
| **ArTVersion**         | object | version                    |
| **ArTId**              | object | code                       |
| **ArTName**            | object | nom                        |
| **ArTType**            | object | type de moyen de transport |
| **ArTXEpsg2154**       | object | coordonnée x               |
| **ArTYEpsg2154**       | object | coordonnée y               |

- stop_point_ref_transporteur_stop.parquet

| Nom de colonne | Type   | Description           |
|----------------|--------|-----------------------|
| **ArRId**      | object | id arrêt              |
| **ArTId**      | object | id arrêt transporteur |

### Contenu du Silver

Les fichiers silver sont des fichiers parquet et ils sont également partitionnés par jour.

### Contenu du Bronze

Source : Open data d'IDFM

Les fichiers bronze sont des .zip qui contiennent des .xml et ils sont partitionnés par jour.

## Lignes commerciales
### Contenu du Gold

Les données contiennent des informations détaillées sur les lignes de transport, leur accessibilité, les horaires et autres métadonnées pertinentes pour la gestion et l'opération des transports en commun dans la région Île-de-France.
Contenu des Données

Les fichiers sont au format parquet et sont mise à jour quotidiennement.

| Nom de colonne          | Type                | Description                                                                |
| :---------------------- | :------------------ | :------------------------------------------------------------------------- |
| version                 | object              | Version des données                                                        |
| created                 | datetime64[ns, UTC] | Date de création de l'enregistrement                                       |
| changed                 | datetime64[ns, UTC] | Date de la dernière modification de l'enregistrement                       |
| status                  | object              | Statut de l'enregistrement                                                 |
| id                      | object              | Identifiant unique de la ligne                                             |
| derivedFromObjectRef    | object              | Référence de l'objet dérivé                                                |
| Name                    | object              | Nom de la ligne                                                            |
| ShortName               | object              | Nom court de la ligne                                                      |
| Description             | object              | Description détaillée de la ligne, incluant l'historique des modifications |
| TransportMode           | object              | Mode de transport (ex : bus)                                               |
| PublicCode              | object              | Code public de la ligne                                                    |
| PrivateCode             | object              | Code privé de la ligne                                                     |
| FromDate                | datetime64[ns, UTC] | Date de début de validité des données                                      |
| ToDate                  | datetime64[ns, UTC] | Date de fin de validité des données                                        |
| MobilityImpairedAccess  | object              | Indication si la ligne est accessible aux personnes à mobilité réduite     |
| WhellchairAcess         | object              | Indication si la ligne est accessible en fauteuil roulant                  |
| AudibleSignalsAvailable | object              | Indication si les signaux sonores sont disponibles                         |
| VisualSignsAvailable    | object              | Indication si les signaux visuels sont disponibles                         |
| FHP_Name                | object              | Nom des horaires valables                                                  |
| FHP_Url                 | object              | URL vers les horaires valables                                             |
| OperatorRef             | object              | Référence de l'opérateur                                                   |
| RepresentedByGroupRef   | object              | Référence du groupe représenté                                             |
| TypeOfLineRef           | object              | Référence du type de ligne                                                 |
| additional_operators    | object              | Opérateurs supplémentaires                                                 |
| Web_Colour              | object              | Couleur web associée à la ligne (code hexadécimal)                         |
| Web_ColourName          | object              | Nom de la couleur web                                                      |
| Web_TextColour          | object              | Couleur du texte sur le web (code hexadécimal)                             |
| Paper_ColourName        | object              | Nom de la couleur papier                                                   |
| Paper_TextColour        | object              | Couleur du texte sur le papier (code hexadécimal)                          |
| TransportSubmode        | object              | Sous-mode de transport (ex : bus régional)                                 |
| typeOfKey               | object              | Type de clé (identifiant alternatif, informations réglementaires, etc.)    |
| Key                     | object              | Clé associée aux informations réglementaires                               |
| Value                   | object              | Valeur associée à la clé                                                   |
| OrganisationName        | object              | Nom de l'organisation                                                      |
| notice_name             | object              | Nom de l'avis                                                              |
| notice_text             | object              | Texte de l'avis                                                            |
| OperatorName            | object              | Nom de l'opérateur                                                         |
| NetworkName             | object              | Nom du réseau                                                              |
| MapName                 | object              | Nom du plan de ligne                                                       |
| MapUrl                  | object              | URL vers le plan de ligne                                                  |
| childOf                 | object              | Référence parent                                                           |



## Lignes administratives
### Contenu du Gold

Les données contiennent des informations sur les lignes de bus et leur gestion contractuelle, incluant des détails sur les dates de création et de modification, les statuts, et les informations contractuelles associées.
Contenu des Données

Les fichiers sont au format parquet et sont mise à jour quotidiennement.

| Nom de colonne | Type                | Description                                          |
| :------------- | :------------------ | :--------------------------------------------------- |
| id             | object              | Identifiant unique de la ligne                       |
| created        | datetime64[ns, UTC] | Date de création de l'enregistrement                 |
| changed        | datetime64[ns, UTC] | Date de la dernière modification de l'enregistrement |
| status         | object              | Statut de l'enregistrement (ex : active, inactive)   |
| version        | object              | Version des données                                  |
| Name           | object              | Nom de la ligne                                      |
| PrivateCode    | object              | Code privé de la ligne                               |
| TransportMode  | object              | Mode de transport (ex : bus)                         |
| IdLc           | object              | Identifiant de ligne dans le contexte local          |
| contract       | object              | Nom du contrat associé                               |
| contract_type  | object              | Type de contrat (ex : Délégation de service public)  |
| FromDate       | datetime64[ns, UTC] | Date de début de validité du contrat                 |
| ToDate         | datetime64[ns, UTC] | Date de fin de validité du contrat                   |
